---
  - name: First install of Turnkey Debian
    hosts: Linux
    become: true
    tasks:
      - name: Update and upgrade apt packages
        apt:
         upgrade: true
         update_cache: true
         cache_valid_time: 86400 #One day

      - name: Get MySQL
        uri:
          url: 'https://dev.mysql.com/get/mysql-apt-config_0.8.22-1_all.deb'
          method: GET

      - name: Copy MySQL APT configuration package
          copy:
          src: path/to/mysql-apt-config*
          dest: /tmp/mysql-apt-config.deb
          remote_src: yes

      - name: Install MySQL APT configuration package
          command: dpkg -i /tmp/mysql-apt-config.deb

      - name: Install packages
        apt:
         name: ['apache2', 'samba']
         state: present

      - name: Edit smb.conf
        blockinfile:
          path: /etc/samba/smb.conf
          block: |
            [homepage]
            comment=
            path = /path/to/config
            force user = smbuser
            force group = smbgroup
            create mask = 0664
            force create mode = 0664
            directory mask = 0775
            force directory mode = 0775
            public = yes
            read only = no

            [www]
            comment=
            path = /var/www/html
            force user = smbuser
            force group = smbgroup
            create mask = 0664
            force create mode = 0664
            directory mask = 0775
            force directory mode = 0775
            public = yes
            read only = no



      #- name: Get docker script
      #  uri:
      #    url: 'https://get.docker.com'
      #    method: GET
      #    dest: get-docker.sh
      #    follow_redirects: safe

      #- name: Run get-docker.sh
      #  shell: get-docker.sh

        #- name:
